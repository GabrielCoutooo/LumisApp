<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumis - Gest√£o Financeira</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script>
        // Aplicar tema salvo o mais cedo poss√≠vel para evitar flash branco
        try {
            var t = localStorage.getItem('lumis_theme');
            if (t === 'dark') { document.documentElement.setAttribute('data-theme', 'dark'); }
        } catch (e) { }
    </script>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <div class="mobile-container">
        <!-- ==================== TELA: DASHBOARD ==================== -->
        <div id="dashboard-screen">
            <div class="header header-with-month">
                <div style="display:flex;flex-direction:column;gap:6px;">
                    <div class="header-greeting"><span id="saudacao-nome">Ol√°</span></div>
                    <div class="header-title" id="saudacao-dinamica"><i class="fa-solid fa-sun"></i> Boa tarde</div>
                </div>
                <div class="mes-navegacao header-embedded-month"
                    style="margin:0;box-shadow:none;border:1px solid rgba(255,255,255,0.18);">
                    <button onclick="navegarMes(-1)" class="mes-nav-btn">
                        <i class="fa-solid fa-chevron-left"></i>
                    </button>
                    <div class="mes-info-container">
                        <span id="titulo-mes-atual" class="mes-titulo">Carregando...</span>
                        <button id="btn-mes-atual" onclick="voltarMesAtual()" class="btn-hoje"
                            style="display:none;">Hoje</button>
                    </div>
                    <button onclick="navegarMes(1)" class="mes-nav-btn">
                        <i class="fa-solid fa-chevron-right"></i>
                    </button>
                </div>
            </div>

            <div class="content">
                <!-- Card Saldo Total com Toggle de Privacidade -->
                <div class="saldo-card">
                    <div class="saldo-header">
                        <div class="saldo-label">Saldo Total</div>
                        <button class="privacy-toggle" onclick="toggleVisibilidadeSaldo()" id="btn-privacy"><i
                                class="fa-solid fa-eye"></i></button>
                    </div>
                    <div class="saldo-value" id="saldo-total">Carregando...</div>
                </div>

                <!-- Resumo Mensal -->
                <div class="resumo-grid">
                    <div class="resumo-card" onclick="abrirModalTransacoes('RECEITA')" style="cursor:pointer;">
                        <div class="icon"><i class="fa-solid fa-chart-line"></i></div>
                        <div class="resumo-label">Receitas</div>
                        <div class="resumo-value receita" id="receitas-mes">-</div>
                    </div>
                    <div class="resumo-card" onclick="abrirModalTransacoes('DESPESA')" style="cursor:pointer;">
                        <div class="icon"><i class="fa-solid fa-chart-line-down"></i></div>
                        <div class="resumo-label">Despesas</div>
                        <div class="resumo-value despesa" id="despesas-mes">-</div>
                    </div>
                </div>

                <!-- Or√ßamentos -->
                <div class="section">
                    <div class="section-title"><i class="fa-solid fa-chart-bar"></i> Or√ßamento do M√™s</div>
                    <div id="orcamentos-list">
                        <div class="loading">
                            <div class="spinner"></div>
                            Carregando or√ßamentos...
                        </div>
                    </div>
                </div>

                <!-- Pr√≥ximos Pagamentos -->
                <div class="section">
                    <div class="section-title"><i class="fa-solid fa-calendar-days"></i> Pr√≥ximos Pagamentos</div>
                    <div id="pagamentos-list">
                        <div class="loading">
                            <div class="spinner"></div>
                            Carregando pagamentos...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== TELA: EXTRATO ==================== -->
        <div id="extrato-screen" class="extrato-screen">
            <div class="header">
                <div class="header-title">Extrato</div>
            </div>

            <!-- Navega√ß√£o de M√™s -->
            <div class="mes-navegacao">
                <button onclick="navegarMes(-1)" class="mes-nav-btn">
                    <i class="fa-solid fa-chevron-left"></i>
                </button>
                <div class="mes-info-container">
                    <span id="titulo-mes-atual-extrato" class="mes-titulo">Carregando...</span>
                    <button id="btn-mes-atual-extrato" onclick="voltarMesAtual()" class="btn-hoje"
                        style="display:none;">Hoje</button>
                </div>
                <button onclick="navegarMes(1)" class="mes-nav-btn">
                    <i class="fa-solid fa-chevron-right"></i>
                </button>
            </div>

            <div class="filter-bar">
                <button class="filter-btn active" onclick="filtrarTransacoes('all')">Todas</button>
                <button class="filter-btn" onclick="filtrarTransacoes('RECEITA')">Receitas</button>
                <button class="filter-btn" onclick="filtrarTransacoes('DESPESA')">Despesas</button>
            </div>

            <div id="transacoes-list">
                <div class="loading">
                    <div class="spinner"></div>
                    Carregando transa√ß√µes...
                </div>
            </div>
        </div>

        <!-- ==================== TELA: REGISTRAR ==================== -->
        <div id="registrar-screen" class="registrar-screen">
            <div class="header" style="padding-top: 30px; padding-bottom: 10px;">
                <div class="header-title"><i class="fa-solid fa-plus"></i> Nova Transa√ß√£o</div>
            </div>

            <div class="registro-quick-entry">
                <input id="input-valor-registro" type="number" min="0" step="0.01" placeholder="0,00" />
            </div>

            <div class="registro-form">
                <div class="tipo-transacao-toggle">
                    <button id="btn-despesa" class="tipo-btn active despesa" onclick="setTipoRegistro('DESPESA')"><i
                            class="fa-solid fa-minus"></i>
                        Despesa</button>
                    <button id="btn-receita" class="tipo-btn" onclick="setTipoRegistro('RECEITA')"><i
                            class="fa-solid fa-plus"></i>
                        Receita</button>
                    <button id="btn-transferencia" class="tipo-btn" onclick="setTipoRegistro('TRANSFERENCIA')"><i
                            class="fa-solid fa-arrow-right-arrow-left"></i>
                        Transfer√™ncia</button>
                </div>

                <form id="form-transacao">
                    <input type="hidden" id="registro-tipo" value="DESPESA" />

                    <div class="form-group">
                        <label>Descri√ß√£o</label>
                        <input id="input-descricao" class="form-control" type="text"
                            placeholder="Ex: Caf√© na padaria, Sal√°rio Outubro" required />
                    </div>

                    <div class="form-group">
                        <label>Conta</label>
                        <select id="select-conta-origem" class="form-control" required>
                            <option value="">Carregando Contas...</option>
                        </select>
                    </div>

                    <div class="form-group" id="grupo-conta-destino" style="display:none;">
                        <label>Conta de Destino</label>
                        <select id="select-conta-destino" class="form-control">
                            <option value="">Selecione...</option>
                        </select>
                    </div>

                    <div class="form-group" id="grupo-categoria">
                        <label>Categoria</label>
                        <select id="select-categoria-registro" class="form-control" required>
                            <option value="">Carregando Categorias...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Data</label>
                        <input id="input-data" class="form-control" type="date" required />
                    </div>

                    <div class="form-group" style="display:flex;align-items:center;gap:10px;">
                        <input id="input-efetuada" type="checkbox" />
                        <label for="input-efetuada" style="margin:0;">Pagamento j√° realizado?</label>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn-primary" style="width:100%; margin-top: 10px; padding: 12px;">
                            Salvar Transa√ß√£o
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ==================== TELA: OR√áAMENTO ==================== -->
        <div id="orcamento-screen" class="orcamento-screen">
            <div class="header">
                <div class="header-actions">
                    <div class="header-title">Or√ßamento</div>
                    <button class="btn-primary" onclick="abrirModalOrcamento()">+ Novo</button>
                </div>
            </div>

            <!-- Navega√ß√£o de M√™s -->
            <div class="mes-navegacao">
                <button onclick="navegarMes(-1)" class="mes-nav-btn">
                    <i class="fa-solid fa-chevron-left"></i>
                </button>
                <div class="mes-info-container">
                    <span id="titulo-mes-atual-orcamento" class="mes-titulo">Carregando...</span>
                    <button id="btn-mes-atual-orcamento" onclick="voltarMesAtual()" class="btn-hoje"
                        style="display:none;">Hoje</button>
                </div>
                <button onclick="navegarMes(1)" class="mes-nav-btn">
                    <i class="fa-solid fa-chevron-right"></i>
                </button>
            </div>

            <div class="content">
                <div class="section">
                    <div class="section-title"><i class="fa-solid fa-chart-bar"></i> Or√ßamentos do m√™s</div>
                    <div id="orcamento-list">
                        <div class="loading">
                            <div class="spinner"></div>
                            Carregando or√ßamentos...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== TELA: PERFIL ==================== -->
        <div id="perfil-screen" class="perfil-screen">
            <div class="header">
                <div class="header-title">Meu Perfil</div>
            </div>

            <div class="content perfil-content">
                <!-- Se√ß√£o I: Informa√ß√µes Pessoais e Seguran√ßa -->
                <div class="perfil-section">
                    <div class="perfil-section-title"><i class="fa-solid fa-user-shield"></i> Informa√ß√µes Pessoais e
                        Seguran√ßa</div>

                    <div class="perfil-info-card">
                        <div class="perfil-info-item">
                            <label>Nome</label>
                            <div class="perfil-value" id="perfil-nome">-</div>
                        </div>
                        <div class="perfil-info-item">
                            <label>Email</label>
                            <div class="perfil-value" id="perfil-email">-</div>
                        </div>
                        <div class="perfil-info-item">
                            <label>Membro desde</label>
                            <div class="perfil-value" id="perfil-data-registro">-</div>
                        </div>
                    </div>

                    <div class="perfil-actions">
                        <button class="btn-action" onclick="abrirModalEditarPerfil()">
                            <i class="fa-solid fa-pen-to-square"></i> Editar Nome/Email
                        </button>
                        <button class="btn-action" onclick="abrirModalAlterarSenha()">
                            <i class="fa-solid fa-key"></i> Alterar Senha
                        </button>
                        <button class="btn-action" onclick="logoutUsuario()">
                            <i class="fa-solid fa-right-from-bracket"></i> Logout
                        </button>
                        <button class="btn-action btn-danger-outline" onclick="abrirModalExcluirConta()">
                            <i class="fa-solid fa-trash-can"></i> Excluir Conta
                        </button>
                    </div>
                </div>

                <!-- Se√ß√£o II: Gerenciamento de Dados Mestres -->
                <div class="perfil-section">
                    <div class="perfil-section-title"><i class="fa-solid fa-database"></i> Gerenciamento de Dados</div>

                    <div class="perfil-actions">
                        <button class="btn-action" onclick="abrirModalGerenciarContas()">
                            <i class="fa-solid fa-wallet"></i> Gerenciar Contas
                        </button>
                        <button class="btn-action" onclick="abrirModalGerenciarCategorias()">
                            <i class="fa-solid fa-tags"></i> Gerenciar Categorias
                        </button>
                        <button class="btn-action" onclick="abrirModalGerenciarRecorrencias()">
                            <i class="fa-solid fa-repeat"></i> Gerenciar Recorr√™ncias
                        </button>
                        <!-- MODAL: GERENCIAR RECORR√äNCIAS MOBILE -->
                        <div id="modal-gerenciar-recorrencias" class="modal-backdrop" style="display:none;"
                            onclick="if(event.target===this) fecharModalGerenciarRecorrencias()">
                            <div class="modal modal-mobile">
                                <div class="modal-header"
                                    style="display:flex;justify-content:space-between;align-items:center;">
                                    <span>Gerenciar Recorr√™ncias</span>
                                    <button class="btn" style="flex:0;padding:4px 10px;"
                                        onclick="fecharModalGerenciarRecorrencias()">X</button>
                                </div>
                                <div class="modal-body" style="max-height:60vh;overflow-y:auto;">
                                    <div id="lista-despesas-recorrencia" class="lista-recorrencias">
                                        <div class="loading">
                                            <div class="spinner"></div> Carregando despesas...
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer" style="display:block;">
                                    <button class="btn btn-primary" style="width:100%;"
                                        onclick="fecharModalGerenciarRecorrencias()">Fechar</button>
                                </div>
                            </div>
                        </div>
                        </button>
                    </div>
                </div>

                <!-- Se√ß√£o III: Configura√ß√µes do Aplicativo -->
                <div class="perfil-section">
                    <div class="perfil-section-title"><i class="fa-solid fa-sliders"></i> Configura√ß√µes do Aplicativo
                    </div>

                    <div class="perfil-config-list">
                        <div class="perfil-config-item">
                            <div class="config-info">
                                <div class="config-label">Ocultar Saldo por Padr√£o</div>
                                <div class="config-description">Saldo ficar√° oculto ao abrir o app</div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="config-saldo-oculto"
                                    onchange="salvarConfiguracao('config_saldo_oculto', this.checked)">
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="perfil-config-item">
                            <div class="config-info">
                                <div class="config-label">Notifica√ß√µes</div>
                                <div class="config-description">Alertas de or√ßamento, metas e pagamentos</div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="config-notificacoes"
                                    onchange="salvarConfiguracao('config_notificacoes', this.checked)">
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="perfil-config-item">
                            <div class="config-info">
                                <div class="config-label">Moeda</div>
                                <div class="config-description">Moeda utilizada no aplicativo</div>
                            </div>
                            <select class="form-control-small select-button" id="config-moeda"
                                onchange="salvarConfiguracao('config_moeda', this.value)">
                                <option value="BRL">R$ - Real Brasileiro</option>
                                <option value="USD">$ - D√≥lar Americano</option>
                                <option value="EUR">‚Ç¨ - Euro</option>
                            </select>
                        </div>

                        <div class="perfil-config-item">
                            <div class="config-info">
                                <div class="config-label">Primeiro Dia do M√™s</div>
                                <div class="config-description">Define o in√≠cio do m√™s financeiro</div>
                            </div>
                            <select class="form-control-small select-button" id="config-primeiro-dia"
                                onchange="salvarConfiguracao('config_primeiro_dia_mes', parseInt(this.value))">
                                <option value="1">Dia 1</option>
                                <option value="5">Dia 5</option>
                                <option value="10">Dia 10</option>
                                <option value="15">Dia 15</option>
                                <option value="20">Dia 20</option>
                                <option value="25">Dia 25</option>
                            </select>
                        </div>

                        <!-- Altern√¢ncia de Tema (posicionado logo abaixo do Primeiro Dia do M√™s) -->
                        <div class="perfil-config-item">
                            <div class="config-info">
                                <div class="config-label">Tema</div>
                                <div class="config-description">Alterne entre tema claro e escuro</div>
                            </div>
                            <button id="btn-theme-toggle" class="theme-toggle" onclick="toggleTheme()">
                                <i class="fa-solid fa-moon"></i>
                                <span id="theme-toggle-text">Tema escuro</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Se√ß√£o IV: Ajuda e Suporte -->
                <div class="perfil-section">
                    <div class="perfil-section-title"><i class="fa-solid fa-circle-info"></i> Ajuda e Suporte</div>

                    <div class="perfil-actions">
                        <button class="btn-action" onclick="exportarDados()">
                            <i class="fa-solid fa-download"></i> Exportar Dados
                        </button>
                        <button class="btn-action" onclick="abrirModalSobre()">
                            <i class="fa-solid fa-circle-question"></i> Sobre o Lumis
                        </button>
                    </div>

                    <div class="perfil-version">
                        <small>Lumis v1.0.0 - ¬© 2025</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== BOTTOM NAVIGATION ==================== -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="mostrarTela('dashboard')">
                <div class="nav-icon"><i class="fa-solid fa-house"></i></div>
                <div class="nav-label">In√≠cio</div>
            </div>
            <div class="nav-item" onclick="mostrarTela('extrato')">
                <div class="nav-icon"><i class="fa-solid fa-clipboard-list"></i></div>
                <div class="nav-label">Extrato</div>
            </div>
            <div class="nav-item highlight" onclick="mostrarTela('registrar')">
                <div class="nav-icon"><i class="fa-solid fa-plus"></i></div>
                <div class="nav-label">Registrar</div>
            </div>
            <div class="nav-item" onclick="mostrarTela('orcamento')">
                <div class="nav-icon"><i class="fa-solid fa-bullseye"></i></div>
                <div class="nav-label">Or√ßamento</div>
            </div>
            <div class="nav-item" onclick="mostrarTela('perfil')">
                <div class="nav-icon"><i class="fa-solid fa-user"></i></div>
                <div class="nav-label">Perfil</div>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL: OR√áAMENTO (Criar/Editar) ==================== -->
    <div id="orcamento-modal" class="modal-backdrop" onclick="if(event.target===this) fecharModalOrcamento()"
        data-mode="create">
        <div class="modal">
            <div class="modal-header">
                <span id="orcamento-modal-title">Novo Or√ßamento</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Categoria (Despesa)</label>
                    <select id="select-categoria" class="form-control"></select>
                </div>
                <div class="form-group">
                    <label>Valor Limite (R$)</label>
                    <input id="input-valor-limite" class="form-control" type="number" min="0" step="0.01"
                        placeholder="0,00" />
                </div>
                <div class="form-group">
                    <label>Per√≠odo</label>
                    <input id="periodo-text" class="form-control" type="text" value="" disabled />
                </div>
                <div class="form-group" style="display:flex;align-items:center;gap:10px;">
                    <input id="input-ativo" type="checkbox" checked />
                    <label for="input-ativo" style="margin:0;">Ativo</label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="fecharModalOrcamento()">Cancelar</button>
                <button class="btn btn-danger" onclick="enviarOrcamento()">Salvar</button>
            </div>
            <input id="hidden-id-orcamento" type="hidden" />
        </div>
    </div>

    <!-- ==================== MODAL: EDITAR PERFIL ==================== -->
    <div id="modal-editar-perfil" class="modal-backdrop" onclick="if(event.target===this) fecharModalEditarPerfil()">
        <div class="modal">
            <div class="modal-header">
                <span>Editar Perfil</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Nome</label>
                    <input id="input-perfil-nome" class="form-control" type="text" required />
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input id="input-perfil-email" class="form-control" type="email" required />
                </div>
                <div class="form-group">
                    <label>Senha Atual (para confirmar)</label>
                    <input id="input-perfil-senha-confirmacao" class="form-control" type="password" required />
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="fecharModalEditarPerfil()">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarPerfilEditado()">Salvar</button>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL: ALTERAR SENHA ==================== -->
    <div id="modal-alterar-senha" class="modal-backdrop" onclick="if(event.target===this) fecharModalAlterarSenha()">
        <div class="modal">
            <div class="modal-header">
                <span>Alterar Senha</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Senha Atual</label>
                    <input id="input-senha-atual" class="form-control" type="password" required />
                </div>
                <div class="form-group">
                    <label>Nova Senha</label>
                    <input id="input-senha-nova" class="form-control" type="password" required />
                </div>
                <div class="form-group">
                    <label>Confirmar Nova Senha</label>
                    <input id="input-senha-nova-confirmar" class="form-control" type="password" required />
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="fecharModalAlterarSenha()">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarNovaSenha()">Alterar Senha</button>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL: EXCLUIR CONTA ==================== -->
    <div id="modal-excluir-conta" class="modal-backdrop" onclick="if(event.target===this) fecharModalExcluirConta()">
        <div class="modal">
            <div class="modal-header modal-header-danger">
                <span>‚ö†Ô∏è Excluir Conta Permanentemente</span>
            </div>
            <div class="modal-body">
                <p style="color: #EF4444; font-weight: 600; margin-bottom: 15px;">
                    Esta a√ß√£o √© IRREVERS√çVEL! Todos os seus dados ser√£o permanentemente exclu√≠dos.
                </p>
                <div class="form-group">
                    <label>Digite sua senha para confirmar</label>
                    <input id="input-excluir-senha" class="form-control" type="password" required />
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="fecharModalExcluirConta()">Cancelar</button>
                <button class="btn btn-danger" onclick="confirmarExclusaoConta()">Excluir Minha Conta</button>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL: GERENCIAR CONTAS ==================== -->
    <div id="modal-gerenciar-contas" class="modal-backdrop"
        onclick="if(event.target===this) fecharModalGerenciarContas()">
        <div class="modal modal-large">
            <div class="modal-header">
                <span>Gerenciar Contas</span>
            </div>
            <div class="modal-body">
                <button class="btn btn-primary" onclick="abrirFormNovaConta()" style="margin-bottom: 15px;">
                    <i class="fa-solid fa-plus"></i> Nova Conta
                </button>
                <div id="lista-contas-gerenciar">
                    <div class="loading">
                        <div class="spinner"></div> Carregando...
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="fecharModalGerenciarContas()">Fechar</button>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL: FORMUL√ÅRIO CONTA ==================== -->
    <div id="modal-form-conta" class="modal-backdrop" onclick="if(event.target===this) fecharFormConta()">
        <div class="modal">
            <div class="modal-header">
                <span id="conta-modal-title">Nova Conta</span>
            </div>
            <div class="modal-body">
                <input type="hidden" id="hidden-id-conta" />

                <div class="form-group">
                    <label>Nome da Conta</label>
                    <input id="input-conta-nome" class="form-control" type="text"
                        placeholder="Ex: Banco XYZ, Carteira, Poupan√ßa" required />
                </div>

                <div class="form-group">
                    <label>Tipo de Conta</label>
                    <select id="select-conta-tipo" class="form-control" required>
                        <option value="CORRENTE">Conta Corrente</option>
                        <option value="POUPANCA">Poupan√ßa</option>
                        <option value="INVESTIMENTO">Investimento</option>
                        <option value="CARTEIRA">Carteira</option>
                        <option value="OUTRO">Outro</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Saldo Inicial</label>
                    <input id="input-conta-saldo" class="form-control" type="number" step="0.01" placeholder="0.00"
                        required />
                </div>

                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input id="input-conta-exibir" type="checkbox" checked />
                        Exibir no Dashboard
                    </label>
                </div>

                <div style="padding: 16px 0 0; border-top: none; display: flex; gap: 10px;">
                    <button class="btn btn-danger-outline" id="btn-deletar-conta" onclick="confirmarExclusaoConta()"
                        style="flex: 1; display: none;">Excluir</button>
                    <button class="btn" onclick="fecharFormConta()" style="flex: 1;">Cancelar</button>
                    <button class="btn btn-primary" onclick="salvarConta()" style="flex: 1;">Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL: GERENCIAR CATEGORIAS ==================== -->
    <div id="modal-gerenciar-categorias" class="modal-backdrop"
        onclick="if(event.target===this) fecharModalGerenciarCategorias()">
        <div class="modal modal-large">
            <div class="modal-header">
                <span>Gerenciar Categorias</span>
            </div>
            <div class="modal-body">
                <button class="btn btn-primary" onclick="abrirFormNovaCategoria()" style="margin-bottom: 15px;">
                    <i class="fa-solid fa-plus"></i> Nova Categoria
                </button>
                <div id="lista-categorias-gerenciar">
                    <div class="loading">
                        <div class="spinner"></div> Carregando...
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="fecharModalGerenciarCategorias()">Fechar</button>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL: FORMUL√ÅRIO CATEGORIA ==================== -->
    <div id="modal-form-categoria" class="modal-backdrop" onclick="if(event.target===this) fecharFormCategoria()">
        <div class="modal">
            <div class="modal-header">
                <span id="categoria-modal-title">Nova Categoria</span>
            </div>
            <div class="modal-body">
                <input type="hidden" id="hidden-id-categoria" />

                <div class="form-group">
                    <label>Nome da Categoria</label>
                    <input id="input-categoria-nome" class="form-control" type="text"
                        placeholder="Ex: Lazer, Sal√°rio, Investimento" required />
                </div>

                <div class="form-group">
                    <label>Tipo</label>
                    <select id="select-categoria-tipo" class="form-control" required>
                        <option value="DESPESA">Despesa (Gasto)</option>
                        <option value="RECEITA">Receita (Ganho)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>√çcone/Emoji (Opcional)</label>
                    <input id="input-categoria-icone" class="form-control" type="text" placeholder="Ex: üçî, üè†, üöÄ"
                        maxlength="2" />
                </div>

                <div class="form-group">
                    <label>Cor (Opcional - Hex)</label>
                    <input id="input-categoria-cor" class="form-control" type="color" value="#3B82F6" />
                </div>

                <div style="padding: 16px 0 0; border-top: none; display: flex; gap: 10px;">
                    <button class="btn btn-danger-outline" id="btn-deletar-categoria"
                        onclick="confirmarExclusaoCategoria()" style="flex: 1; display: none;">Excluir</button>
                    <button class="btn" onclick="fecharFormCategoria()" style="flex: 1;">Cancelar</button>
                    <button class="btn btn-primary" onclick="salvarCategoria()" style="flex: 1;">Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL: SOBRE ==================== -->
    <div id="modal-sobre" class="modal-backdrop" onclick="if(event.target===this) fecharModalSobre()">
        <div class="modal">
            <div class="modal-header">
                <span>Sobre o Lumis</span>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 20px;">
                    <i class="fa-solid fa-coins" style="font-size: 48px; color: #3B82F6;"></i>
                    <h2 style="margin: 10px 0; color: #3B82F6;">Lumis</h2>
                    <p style="color: #6B7280;">Gest√£o Financeira Inteligente</p>
                </div>
                <div style="text-align: left; line-height: 1.8;">
                    <p><strong>Vers√£o:</strong> 1.0.0</p>
                    <p><strong>Data de Lan√ßamento:</strong> Novembro 2025</p>
                    <p style="margin-top: 20px;">
                        O Lumis √© um sistema completo de gest√£o financeira pessoal,
                        desenvolvido para ajudar voc√™ a controlar suas finan√ßas de forma simples e eficiente.
                    </p>
                    <p style="margin-top: 15px; font-size: 12px; color: #6B7280;">
                        <a href="#" style="color: #3B82F6;">Termos de Uso</a> |
                        <a href="#" style="color: #3B82F6;">Pol√≠tica de Privacidade</a>
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="fecharModalSobre()">Fechar</button>
            </div>
        </div>
    </div>

    <!-- MODAL: LISTA DE RECEITAS/DESPESAS DO M√äS -->
    <div id="modal-transacoes-tipo" class="modal-backdrop" onclick="if(event.target===this) fecharModalTransacoesTipo()"
        style="display:none;">
        <div class="modal modal-large">
            <div class="modal-header" style="text-align:center;display:block;">
                <span id="transacoes-tipo-titulo">Transa√ß√µes</span>
            </div>
            <div class="modal-body" style="max-height:60vh;overflow-y:auto;">
                <div id="lista-transacoes-tipo">
                    <div class="loading">
                        <div class="spinner"></div> Carregando...
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="fecharModalTransacoesTipo()"
                    style="width:100%;">Fechar</button>
            </div>
        </div>
    </div>

    <!-- MODAL: DETALHES DO OR√áAMENTO -->
    <div id="modal-orcamento-detalhes" class="modal-backdrop"
        onclick="if(event.target===this) fecharModalOrcamentoDetalhes()" style="display:none;">
        <div class="modal modal-large">
            <div class="modal-header" style="text-align:center;display:block;">
                <span id="orcamento-detalhes-titulo">Or√ßamento</span>
            </div>
            <div class="modal-body" style="max-height:60vh;overflow-y:auto;">
                <div id="orcamento-detalhes-info" style="margin-bottom:15px;font-size:14px;line-height:1.6;"></div>
                <div id="orcamento-detalhes-transacoes">
                    <div class="loading">
                        <div class="spinner"></div> Carregando transa√ß√µes...
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="display:flex;gap:10px;flex-wrap:wrap;">
                <button class="btn" onclick="fecharModalOrcamentoDetalhes()" style="flex:1;">Fechar</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>

</html>